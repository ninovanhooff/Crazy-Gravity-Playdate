---
--- Generated by EmmyLua(https://github.com/EmmyLua)
--- Created by ninovanhooff.
--- DateTime: 13/03/2022 00:13
---

local buttonJustPressed <const> = playdate.buttonJustPressed
local getButtonState <const> = playdate.getButtonState
local buttonState = 0
local throttle <const> = playdate.kButtonA | playdate.kButtonB | playdate.kButtonUp
local buttonDown <const> = playdate.kButtonDown
local buttonLeft <const> = playdate.kButtonLeft
local buttonRight <const> = playdate.kButtonRight


local thrustSound <const> = thrust_sound

local sinThrustT <const> = sinThrustT
local cosThrustT <const> = cosThrustT

local function pressed(buttonMask)
    return buttonState & buttonMask ~= 0
end

function ProcessInputs()
    buttonState = getButtonState()
    -- thrust
    if (pressed(throttle) and fuel > 0) then
        if Sounds and thrust == 0 then thrustSound:play(0) end
        thrust = 1
        fuel = fuel - burnRate
        fuelSpent = fuelSpent + burnRate/10
        if not flying then
            vx = 0
            vy = 0
        end
        flying = true
        vx = vx + cosThrustT[planeRot]*(thrustPower+extras[1]*turboPower)
        vy = vy - sinThrustT[planeRot]*(thrustPower+extras[1]*turboPower)
    elseif thrust == 1 then
        if Sounds then thrustSound:stop() end
        thrust = 0
    end

    -- rotation
    if pressed(buttonDown) then
        if planeRot~=18 then
            if planeRot>18 or planeRot<6 then
                planeRot = planeRot-1
            else
                planeRot = planeRot+1
            end
        end
        if planeRot<0 then planeRot = 23 end
    elseif pressed(buttonLeft) then
        if flying then
            planeRot = planeRot - 1
            if planeRot<0 then
                planeRot = 23
            end
        end
    elseif pressed(buttonRight) then
        if flying then
            planeRot = planeRot + 1
            planeRot = planeRot % 24
        end
    end
end

function isThrottleJustPressed()
    return buttonJustPressed(throttle)
end
